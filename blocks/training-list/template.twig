<section class="{{ block.slug }} bg-{{ fields.bg }} !overflow-clip">
	{% if block.anchor %}
		<div class="section-anchor" id="{{ block.anchor ?? block.id }}"></div>
	{% endif %}

	{% set pt = fields.padding_top and fields.padding_top != "unset" ? fields.padding_top : "st-xl" %}
	{% set pb = fields.padding_top and fields.padding_bottom != "unset" ? fields.padding_bottom : "sb-xxl" %}

	<div class="container">
		<div class="{{ pt }} {{ pb }} relative z-[2]">
			{% if posts|length %}
				<div class="training-list">
					<div class="flex max-lg:flex-col ~gap-[1.25rem]/[4rem]">
						{% if categories.parents|length or languages|length %}
							<div class="actions-container">
								<div class="actions-inner will-stick">
									<div class="search">
										<input placeholder="{{ fields.search_placeholder }}" type="text">

										<svg class="h-[1.1875rem] w-[1.1875rem]" width="19" height="19" viewbox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path d="M8.2332 2.53333C5.0849 2.53333 2.5332 5.08503 2.5332 8.23333C2.5332 11.3816 5.0849 13.9333 8.2332 13.9333C11.3815 13.9333 13.9332 11.3816 13.9332 8.23333C13.9332 5.08503 11.3815 2.53333 8.2332 2.53333Z" stroke="#262626" stroke-miterlimit="10"/>
											<path d="M16.4666 16.4671L12.3101 12.3105" stroke="#262626" stroke-miterlimit="10" stroke-linecap="square"/>
										</svg>
									</div>

									<div class="dialog-trigger flex gap-[0.75rem] py-[0.625rem]">
										<svg class="w-[1.25rem] h-[1.25rem]" width="20" height="21" viewbox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path d="M17.7082 4.9043H14.7915" stroke="#262626" stroke-miterlimit="10" stroke-linecap="square" stroke-linejoin="round"/>
											<path d="M12.2915 4.9043H2.2915" stroke="#262626" stroke-miterlimit="10" stroke-linecap="square" stroke-linejoin="round"/>
											<path d="M2.2915 15.3223H11.4582" stroke="#262626" stroke-miterlimit="10" stroke-linecap="square" stroke-linejoin="round"/>
											<path d="M13.9585 15.3223H17.7085" stroke="#262626" stroke-miterlimit="10" stroke-linecap="square" stroke-linejoin="round"/>
											<path d="M2.2915 10.1133H5.20817" stroke="#262626" stroke-miterlimit="10" stroke-linecap="square" stroke-linejoin="round"/>
											<path d="M7.7085 10.1133H17.7085" stroke="#262626" stroke-miterlimit="10" stroke-linecap="square" stroke-linejoin="round"/>
											<path d="M13.5415 6.98893C12.8511 6.98893 12.2915 6.42935 12.2915 5.73893V4.07227C12.2915 3.38185 12.8511 2.82227 13.5415 2.82227C14.2319 2.82227 14.7915 3.38185 14.7915 4.07227V5.73893C14.7915 6.42935 14.2319 6.98893 13.5415 6.98893Z" stroke="#262626" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
											<path d="M12.7085 17.4049C12.0181 17.4049 11.4585 16.8454 11.4585 16.1549V14.4883C11.4585 13.7979 12.0181 13.2383 12.7085 13.2383C13.3989 13.2383 13.9585 13.7979 13.9585 14.4883V16.1549C13.9585 16.8454 13.3989 17.4049 12.7085 17.4049Z" stroke="#262626" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
											<path d="M6.4585 12.196C5.76808 12.196 5.2085 11.6364 5.2085 10.946V9.2793C5.2085 8.58888 5.76808 8.0293 6.4585 8.0293C7.14891 8.0293 7.7085 8.58888 7.7085 9.2793V10.946C7.7085 11.6364 7.14891 12.196 6.4585 12.196Z" stroke="#262626" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
										</svg>

										<p>{{ fields.filter_title }}</p>
									</div>

									<dialog class="filters">
										<div class="dialog-inner">
											<div class="dialog-head">
												<p class="text-blue clear-all decoration-[0.0625rem] hover:underline underline-offset-[0.125rem]">{{ fields.clear_all_text }}</p>
												<p>{{ fields.filter_title }}</p>
												<p class="text-blue dialog-close decoration-[0.0625rem] hover:underline underline-offset-[0.125rem]">{{ fields.dialog_close_text }}</p>
											</div>

											<div class="dialog-body">
												<div class="dialog-body-inner">
													<div class="flex justify-between items-center pb-[0.75rem] border-b-[0.0625rem] border-b-gray-2">
														<small class="shrink-0 text-black-60">{{ fields.filter_title }}</small>

														<div class="clear-all shrink-0 cursor-pointer max-lg:hidden">
															<p class="text-black-60 sm hover:underline decoration-[0.0625rem] underline-offset-[0.125rem]">{{ fields.clear_all_text }}</p>
														</div>
													</div>

													<div class="dialog-taxonomy">
														{% for item in categories.parents %}
															<div class="res-group active">
																<div class="res-head">
																	<p>{{ item.category.name }}</p>

																	<svg class="h-[0.625rem] w-[0.625rem]" width="9" height="9" viewbox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
																		<line y1="4.5" x2="9" y2="4.5" stroke="black"/>
																		<line x1="4.5" y1="9" x2="4.5" y2="2.18557e-08" stroke="black"/>
																	</svg>
																</div>

																{% if item.children|length %}
																	<div class="res-body">
																		{% for index, child in item.children %}
																			<div class="res-filter">
																				<div class="res-filter-inner">
																					<input type="checkbox" value="{{ child.slug }}" name="category">
																					<div class="res-box"></div>
																					<p>{{ child.name }}</p>
																				</div>
																			</div>
																		{% endfor %}
																	</div>
																{% endif %}
															</div>
														{% endfor %}

														{% if languages|length %}
															<div class="res-group active">
																<div class="res-head">
																	<p>{{ fields.language_text }}</p>

																	<svg class="h-[0.625rem] w-[0.625rem]" width="9" height="9" viewbox="0 0 9 9" fill="none" xmlns="http://www.w3.org/2000/svg">
																		<line y1="4.5" x2="9" y2="4.5" stroke="black"/>
																		<line x1="4.5" y1="9" x2="4.5" y2="2.18557e-08" stroke="black"/>
																	</svg>
																</div>

																<div class="res-body">
																	{% for item in languages %}
																		<div class="res-filter">
																			<div class="res-filter-inner">
																				<input type="checkbox" value="{{ item.slug }}" name="category">
																				<div class="res-box"></div>
																				<p>{{ item.name }}</p>
																			</div>
																		</div>
																	{% endfor %}
																</div>
															</div>
														{% endif %}
													</div>
												</div>

												<div class="btn filled blue dialog-close mt-[1.25rem] lg:hidden w-full" type="button">
													<svg width="13" height="13" viewbox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
														<path d="M8.55697 10.375L11.8486 6.94618L8.55697 3.51736" stroke="white" stroke-width="1.5" stroke-miterlimit="10"/>
														<path d="M1.01411 0.500006L1.0141 5.84896C1.0141 6.45463 1.50566 6.94618 2.11133 6.94618L11.9863 6.94618" stroke="white" stroke-width="1.5" stroke-miterlimit="10"/>
													</svg>

													<p>{{ fields.dialog_apply_text }}</p>
												</div>
											</div>
										</div>
									</dialog>
								</div>
							</div>
						{% endif %}

						<div class="items-container">
							<div class="items" data-per-page="{{ base_count }}">
								{% for post in posts %}
									{% set tag_names = [] %}
									{% set categories_raw = post.terms('training-service-category') %}

									{% set languages_raw = post.terms('training-service-language') %}

                                    {% if categories_raw is not empty %}
                                        {% for item in categories_raw %}
                                            {% set tag_names = tag_names | merge([item.slug]) %}
                                        {% endfor %}
                                    {% endif %}

                                    {% if languages_raw is not empty %}
                                        {% for item in languages_raw %}
                                            {% set tag_names = tag_names | merge([item.slug]) %}
                                        {% endfor %}
                                    {% endif %}

									{% set excerpt = function("get_field", "ts_excerpt", post.ID) %}

									<a class="res-card in-filter" href="{{ post.permalink }}" data-asset-id="{{ asset.id }}" data-tags='{{ tag_names | json_encode | raw }}'>
										<div class="res-card-inner">
											<div class="res-card-head">
												{% if categories_raw is not empty %}
													<div class="res-card-brow">
														<div class="res-card-brow-square"></div>
														<small>{{ categories_raw|join(', ') }}</small>
													</div>
												{% endif %}

												{% if languages_raw is not empty %}
													<small>{{ languages_raw|join(', ') }}</small>
												{% endif %}
											</div>

											<div class="flex flex-col gap-[0.75rem]">
												<p class="main-title lg">{{ post.title }}</p>

												{% if excerpt %}
													<p class="sm text-black-60">{{ excerpt }}</p>
												{% endif %}
											</div>
										</div>
									</a>
								{% endfor %}
							</div>

							<div class="empty-state">
								<h6>{{ fields.empty_state_main_text }}</h6>
								<p class="text-black-60">{{ fields.empty_state_subtext }}</p>
							</div>

							{% if posts|length > base_count %}
								<div class="see-more mx-auto active">
									<div class="btn has-arrow blue filled">
										<svg width="13" height="13" viewbox="0 0 13 13" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path d="M8.55697 10.375L11.8486 6.94618L8.55697 3.51736" stroke="white" stroke-width="1.5" stroke-miterlimit="10"/>
											<path d="M1.01411 0.500006L1.0141 5.84896C1.0141 6.45463 1.50566 6.94618 2.11133 6.94618L11.9863 6.94618" stroke="white" stroke-width="1.5" stroke-miterlimit="10"/>
										</svg>

										<p>{{ fields.load_more_text }}</p>
									</div>
								</div>
							{% endif %}
						</div>
					</div>
				</div>
			{% else %}
				<div class="empty-state active">
					<h6>{{ fields.zero_assets_found_text }}</h6>
				</div>
			{% endif %}
		</div>
	</div>
</section>
